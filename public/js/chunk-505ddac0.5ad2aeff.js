(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-505ddac0"],{"02bc":function(e,t,i){},"1e0a":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"index__wrapper"},[i("div",{staticClass:"index__head"},[e.table?i("div",{staticClass:"index__head-name"},[i("div",{staticClass:"index__icon-wrapper"},[i("svg",{attrs:{width:"14",height:"13"}},[i("use",{attrs:{"xlink:href":"#tableicon"}})])]),i("div",{staticClass:"index__name-wrapper"},[i("div",{staticClass:"index__overide-name"},[e._v(e._s(e.table.name))]),i("div",{staticClass:"index__real-name"},[e._v(e._s(e.table.code))])])]):e._e(),i("div",{staticClass:"index__head-options"},[i("ul",{staticClass:"index__head-options-list"},[i("li",{staticClass:"index__menu-item",class:{active:e.popups.isPropertiesPopupShow},on:{click:function(t){return e.openPopup("isPropertiesPopupShow")}}},[e._v("\n\t\t\t\t\t"+e._s(e.$t("properties"))+"\n\t\t\t\t\t"),e.popups.isPropertiesPopupShow&&e.propertiesPopupData?i("Properties",{directives:[{name:"click-outside",rawName:"v-click-outside:isPropertiesPopupShow",value:e.closePopup,expression:"closePopup",arg:"isPropertiesPopupShow"}],attrs:{columns:e.propertiesPopupData}}):e._e()],1),i("li",{staticClass:"index__menu-item",class:{active:e.popups.isSortPopupShow},on:{click:function(t){return e.openPopup("isSortPopupShow")}}},[e._v("\n\t\t\t\t\t"+e._s(e.$t("sort"))+"\n\t\t\t\t\t"),e.popups.isSortPopupShow?i("SortPopup",{directives:[{name:"click-outside",rawName:"v-click-outside:isSortPopupShow",value:e.closePopup,expression:"closePopup",arg:"isSortPopupShow"}],attrs:{columns:e.table.columns,tview:e.activeTview}}):e._e()],1),i("li",{staticClass:"index__menu-item",class:{active:e.popups.isFiltersPopupShow},on:{click:function(t){return e.openPopup("isFiltersPopupShow")}}},[e._v("\n\t\t\t\t\t"+e._s(e.$t("filter"))+"\n\t\t\t\t\t"),e.popups.isFiltersPopupShow?i("FiltersPopup",{directives:[{name:"click-outside",rawName:"v-click-outside:isFiltersPopupShow",value:e.closePopup,expression:"closePopup",arg:"isFiltersPopupShow"}],attrs:{columns:e.table.columns,tview:e.activeTview}}):e._e()],1),i("li",{staticClass:"index__menu-item index__menu-item-more",class:{active:e.popups.isExportPopupShow},on:{click:function(t){return e.openPopup("isExportPopupShow")}}},[e._v("\n\t\t\t\t\t...\n\t\t\t\t\t"),e.popups.isExportPopupShow?i("ExportPopup",{directives:[{name:"click-outside",rawName:"v-click-outside:isExportPopupShow",value:e.closePopup,expression:"closePopup",arg:"isExportPopupShow"}],attrs:{tview:e.activeTview}}):e._e()],1)]),i("button",{staticClass:"index__add-btn el-btn",on:{click:function(t){return e.addElement()}}},[i("svg",{attrs:{width:"12",height:"12"}},[i("use",{attrs:{"xlink:href":"#plus"}})]),e._v("\n\t\t\t\t"+e._s(e.$t("add_element"))+"\n\t\t\t")])])]),e.table&&e.activeTview?i("Table",{attrs:{table:e.table,tview:e.activeTview}}):e._e()],1)},n=[],r=(i("ac4d"),i("8a81"),i("ac6a"),i("7f7f"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"filters-popup__wrapper"},[i("div",{staticClass:"filters-popup__rows"},e._l(e.filter,(function(t,s){return i("div",{staticClass:"filters-popup__row"},[i("div",{staticClass:"filters-popup__operators-wrapper"},[s>0?i("Select",{staticClass:"filters-popup__select",attrs:{defaultText:e.defaultOper}},e._l(e.binOperations,(function(t){return i("SelectOption",{key:t,class:{active:e.defaultOper==t},nativeOn:{click:function(i){return e.selectLogic(t)}}},[e._v(e._s(t))])})),1):e._e(),i("Select",{staticClass:"filters-popup__select",attrs:{defaultText:t.name?t.name:t.code}},e._l(e.columns,(function(s){return i("SelectOption",{key:s.field,class:{active:t.code==s.field},nativeOn:{click:function(i){return e.selectColumn(t,s)}}},[e._v(e._s(s.em.name?s.em.name:s.field))])})),1),i("Select",{staticClass:"filters-popup__select",attrs:{defaultText:e.getColumnCollationName(t.code,t.operation)}},e._l(e.getColumnCollations(t.code),(function(s){return i("SelectOption",{key:s.code,class:{active:t.operation==s.code},nativeOn:{click:function(i){return e.selectOperation(t,s)}}},[e._v(e._s(s.name))])})),1),i("MainFilterField",{attrs:{filter:t,columns:e.columns},on:{onChange:e.changeFilterValue}})],1),i("div",{staticClass:"filters-popup__delete-row-icon-wrapper",on:{click:function(t){return t.stopPropagation(),e.deleteRowFilter(s)}}},[i("div",{staticClass:"filters-popup__delete-row-icon"},[i("svg",{attrs:{width:"12",height:"12"}},[i("use",{attrs:{"xlink:href":"#plus-white"}})])])])])})),0),i("button",{staticClass:"el-gbtn",on:{click:e.addFilterRow}},[e._v(e._s(e.$t("popups.filtersPopup.add_filter")))])])}),o=[],a=(i("55dd"),i("96cf"),i("3b8d")),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.filterComponent,{tag:"component",attrs:{filter:e.filter,settings:e.settings},on:{onChange:e.changeValue}})},u=[],c={props:["filter","columns"],data:function(){return{settings:!1}},computed:{filterComponent:function(){var e=this.columns[this.filter.code];if("undefined"==typeof e.em)return!1;var t=e.em.type_info.code;return this.settings=e.em.settings,function(){return i("91b9")("./".concat(t,"/Filter.vue"))}}},methods:{changeValue:function(e){this.$emit("onChange",{value:e,filter:this.filter})}}},p=c,d=i("2877"),f=Object(d["a"])(p,l,u,!1,null,null,null),h=f.exports,m=i("d230"),v={components:{MainFilterField:h},props:["columns","tview"],data:function(){return{select:{columnSelect:!1,operationSelect:!1,binSelect:!1},operations:[],binOperations:["AND","OR"],defaultOper:"AND",filter:[],newFilters:[],sourceFilters:[],sendRequest:!0}},watch:{filter:{handler:function(){this.newFilters=[],this.buildNewFilter(this.newFilters,JSON.parse(JSON.stringify(this.filter))),this.tview.filter=0==this.newFilters[0].fields.length?[]:this.newFilters[0];var e=this;if(!this.sendRequest)return!1;this.saveFilters(),this.sendRequest=!1,setTimeout((function(){e.sendRequest=!0,e.saveFilters()}),2e3)},deep:!0}},methods:{selectColumn:function(e,t){e.code=t.field,e.name=t.em.name,this.operations=t.em.collations},selectOperation:function(e,t){e.operation=t.code},selectLogic:function(e){this.defaultOper=e},saveFilters:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,s=i("4328"),n=s.stringify({filters:0==this.newFilters[0].fields.length?[]:this.newFilters[0],tviewId:this.tview.id}),e.next=5,this.$store.dispatch("select",{select:{from:t.tview.table,page:1,tview:t.tview.id,where:0==this.newFilters[0].fields.length?"":t.newFilters[0],order:t.tview.sort}});case 5:return e.next=7,this.$axios({method:"GET",url:"/tview/saveFilters/",params:n,paramsSerializer:function(e){return n}});case 7:if(r=e.sent,r.data.success){e.next=10;break}return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),buildNewFilter:function(e,t){if("undefined"==typeof t)return!1;e.push({operation:this.defaultOper,fields:[]});var i=!0,s=!1,n=void 0;try{for(var r,o=t[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var a=r.value;e[0].fields.push({code:a.code,operation:a.operation,value:a.value})}}catch(l){s=!0,n=l}finally{try{i||null==o.return||o.return()}finally{if(s)throw n}}},getFirstElement:function(e){for(var t in e)return e[t]},addFilterRow:function(){var e=this.getFirstElement(this.columns);this.filter.push({code:e.field,operation:e.em.collations[0].code,name:e.em.name,value:"",select:JSON.parse(JSON.stringify(this.select))})},deleteRowFilter:function(e){this.filter.splice(e,1)},getColumnNameByCode:function(e){return"undefined"!=typeof this.columns[e]&&"undefined"!=typeof this.columns[e].em.name?this.columns[e].em.name:e},getColumnCollations:function(e){return"undefined"!=typeof this.columns[e]&&"undefined"!=typeof this.columns[e].em.collations?this.columns[e].em.collations:[]},getColumnCollationName:function(e,t){if("undefined"==typeof this.columns[e]||"undefined"==typeof this.columns[e].em.collations)throw new Error("No collation with code ".concat(e));var i=this.columns[e].em.collations,s=!0,n=!1,r=void 0;try{for(var o,a=i[Symbol.iterator]();!(s=(o=a.next()).done);s=!0){var l=o.value;if(l.code==t)return l.name}}catch(u){n=!0,r=u}finally{try{s||null==a.return||a.return()}finally{if(n)throw r}}},parseFilers:function(e,t){if("undefined"!=typeof e.fields)return this.defaultOper=e.operation,this.parseFilers(e.fields,e.operation),!1;for(var i in e)"undefined"==typeof e[i].fields?(this.$set(e[i],"select",JSON.parse(JSON.stringify(this.select))),this.$set(e[i],"name",this.getColumnNameByCode(e[i].code)),this.filter.push(JSON.parse(JSON.stringify(e[i])))):this.parseFilers(e[i].fields,e[i].operation)},changeFilterValue:function(e){e.filter.value=e.value}},mounted:function(){this.parseFilers(this.tview.filter),this.sourceFilters=this.tview.filter}},w=v,_=(i("5040"),Object(d["a"])(w,r,o,!1,null,null,null)),b=_.exports,C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"export-popup-wr"},[i("div",{staticClass:"export-popup"},[i("a",{staticClass:"export-popup-btn",attrs:{target:"blank",href:e.linkToDownloadCsv}},[e._v("\n\t\t\tExport to CSV\n\t\t")])])])},S=[],g={props:["tview"],computed:{linkToDownloadCsv:function(){return"/element/api/tview/exportCsv?tviewId="+this.tview.id}}},x=g,y=(i("26da"),Object(d["a"])(x,C,S,!1,null,null,null)),P=y.exports,k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sort-popup__wrapper"},[i("div",{staticClass:"sort-popup__rows"},e._l(e.sortArray,(function(t,s){return i("div",{staticClass:"sort-popup__row"},[i("div",{staticClass:"sort-popup__operators-wrapper"},[i("Select",{staticClass:"sort-popup__select",attrs:{defaultText:t.selectedColumn.name?t.selectedColumn.name:t.selectedColumn.code}},e._l(e.columns,(function(s){return i("SelectOption",{key:s.field,class:{active:s.field==t.selectedColumn.code},attrs:{value:s.field},nativeOn:{click:function(i){return e.selectCol(t,s)}}},[e._v(e._s(s.em.name?s.em.name:s.field))])})),1),i("Select",{staticClass:"sort-popup__select",attrs:{defaultText:t.default}},e._l(e.sortValues,(function(s,n){return i("SelectOption",{key:n,class:{active:t.default==s},nativeOn:{click:function(i){return e.selectSorting(t,n,s)}}},[e._v(e._s(s))])})),1)],1),i("div",{staticClass:"sort-popup__delete-row-icon-wrapper",on:{click:function(t){return t.stopPropagation(),e.deleteRowSort(s)}}},[i("div",{staticClass:"sort-popup__delete-row-icon"},[i("svg",{attrs:{width:"12",height:"12"}},[i("use",{attrs:{"xlink:href":"#plus-white"}})])])])])})),0),i("button",{staticClass:"el-gbtn",on:{click:e.addSortRow}},[e._v(e._s(e.$t("popups.sortPopup.add_sort")))])])},F=[],O=(i("28a5"),{props:["tview","columns"],data:function(){return{sortParams:"",sortArray:[],sortValues:{ASC:"Ascenging",DESC:"Descending"},finalSort:[],sendRequest:!0}},watch:{sortArray:{handler:function(){if(!this.sendRequest)return!1;var e=this;this.buildSortParams(),e.sendRequest=!1,setTimeout((function(){e.sendRequest=!0,e.buildSortParams()}),2e3)},deep:!0}},methods:{selectCol:function(e,t){e.selectedColumn.code=t.field,e.selectedColumn.name=t.em.name},selectSorting:function(e,t,i){e.selectedSort=t,e.default=i},buildSortParams:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s,n,r,o,a,l,u,c,p,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=[],s=!0,n=!1,r=void 0,e.prev=4,o=this.sortArray[Symbol.iterator]();!(s=(a=o.next()).done);s=!0)l=a.value,u=[],u.push(l.selectedColumn.code),u.push(l.selectedSort),t.push(u.join(" "));e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](4),n=!0,r=e.t0;case 12:e.prev=12,e.prev=13,s||null==o.return||o.return();case 15:if(e.prev=15,!n){e.next=18;break}throw r;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return this.finalStrSort=t,this.sortParams=t,this.tview.sort=t,c=this,p=i("4328"),d=p.stringify({sort:t,tviewId:this.tview.id}),e.next=28,this.$store.dispatch("select",{select:{from:c.tview.table,page:1,tview:c.tview.id,where:"undefined"==typeof c.tview.filter.fields?"":c.tview.filter,order:t}});case 28:return e.next=30,this.$axios({method:"GET",url:"/tview/saveSort/",params:d,paramsSerializer:function(e){return d}});case 30:if(f=e.sent,f.data.success){e.next=33;break}return e.abrupt("return",!1);case 33:case"end":return e.stop()}}),e,this,[[4,8,12,20],[13,,15,19]])})));function t(){return e.apply(this,arguments)}return t}(),getFirstElement:function(e){for(var t in e)return e[t]},addSortRow:function(){var e={},t=this.getFirstElement(this.columns);this.$set(e,"default","Ascenging"),this.$set(e,"selectedSort","ASC"),this.$set(e,"selectedColumn",{code:t.field,name:t.em.name}),this.$set(e,"popups",{isOpenSelectColumn:!1,isOpenSelectSort:!1}),this.sortArray.push(e)},deleteRowSort:function(e){this.sortArray.splice(e,1)},getColumnNameByCode:function(e,t){for(var i in e)if(e[i].field==t)return e[i].em.name;return t},parseSortParam:function(){var e=this.tview.sort,t=!0,i=!1,s=void 0;try{for(var n,r=e[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var o=n.value,a=o.trim().split(" ")[0],l=o.trim().split(" ")[1],u={};this.$set(u,"default",this.sortValues[l]),this.$set(u,"selectedSort",l),this.$set(u,"selectedColumn",{code:a,name:this.getColumnNameByCode(this.columns,a)}),this.$set(u,"popups",{isOpenSelectColumn:!1,isOpenSelectSort:!1}),this.sortArray.push(u)}}catch(c){i=!0,s=c}finally{try{t||null==r.return||r.return()}finally{if(i)throw s}}}},mounted:function(){this.sortParams=this.tview.sort,this.parseSortParam()}}),$=O,E=(i("588e"),Object(d["a"])($,k,F,!1,null,null,null)),N=E.exports,R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"properties-popup"},[i("div",{staticClass:"properties-list"},e._l(e.columns,(function(e){return i("PropertyItem",{key:e.field,attrs:{column:e}})})),1)])},T=[],A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"property-item-list-item",on:{click:function(e){e.stopPropagation()}}},[s("div",[s("div",{staticClass:"property-item-big-icon"},[s("img",{attrs:{src:i("53a4")("./assets"+e.column.em.type_info.iconPath),alt:""}})])]),s("div",{staticClass:"property-item-names-wrapper"},[s("div",{staticClass:"property-item-overide-name"},[e._v(e._s(e.getColName(e.column)))]),s("div",{staticClass:"property-item-real-name"},[e._v(e._s(e.column.field))])]),s("div",{staticClass:"property-item-checkbox-wrapper"},[s("Checkbox",{attrs:{checked:e.column.visible},on:{"update:checked":function(t){return e.$set(e.column,"visible",t)}}})],1)])},D=[],j={props:["column"],methods:{getColName:function(e){return"undefined"!=typeof e.em&&e.em.name?e.em.name:e.field}}},J=j,I=(i("6412"),Object(d["a"])(J,A,D,!1,null,null,null)),q=I.exports,V={props:["columns"],components:{PropertyItem:q}},B=V,M=(i("a805"),Object(d["a"])(B,R,T,!1,null,null,null)),L=M.exports,z={mixins:[m["a"]],components:{Properties:L,FiltersPopup:b,ExportPopup:P,SortPopup:N},metaInfo:function(){var e=this.table?this.table.name:"";return{title:"Table: ".concat(e)}},data:function(){return{table:!1,popups:{isPropertiesPopupShow:!1,isFiltersPopupShow:!1,isSortPopupShow:!1,isExportPopupShow:!1},propertiesPopupData:{}}},computed:{activeTview:function(){var e=this.$route.params.tview,t=!0,i=!1,s=void 0;try{for(var n,r=this.table.tviews[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var o=n.value;if(o.id==e)return o}}catch(a){i=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(i)throw s}}}},methods:{openPopup:function(e){this.popups[e]=!0},closePopup:function(e,t){this.popups[t]=!1},activeTable:function(){this.table=this.$store.getters.getTable(this.$route.params.tableCode),this.propertiesPopupData=this.table.columns},addElement:function(){this.$router.push("/table/".concat(this.table.code,"/add/"))}},mounted:function(){this.activeTable()},watch:{"$route.fullPath":function(){this.activeTable()}}},G=z,U=(i("ddc5"),Object(d["a"])(G,s,n,!1,null,null,null));t["default"]=U.exports},"1e7e":function(e,t,i){},"26da":function(e,t,i){"use strict";var s=i("b583"),n=i.n(s);n.a},"27bc":function(e,t,i){},"28a5":function(e,t,i){"use strict";var s=i("aae3"),n=i("cb7c"),r=i("ebd6"),o=i("0390"),a=i("9def"),l=i("5f1b"),u=i("520a"),c=i("79e5"),p=Math.min,d=[].push,f="split",h="length",m="lastIndex",v=4294967295,w=!c((function(){RegExp(v,"y")}));i("214f")("split",2,(function(e,t,i,c){var _;return _="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[h]||2!="ab"[f](/(?:ab)*/)[h]||4!="."[f](/(.?)(.?)/)[h]||"."[f](/()()/)[h]>1||""[f](/.?/)[h]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!s(e))return i.call(n,e,t);var r,o,a,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,f=void 0===t?v:t>>>0,w=new RegExp(e.source,c+"g");while(r=u.call(w,n)){if(o=w[m],o>p&&(l.push(n.slice(p,r.index)),r[h]>1&&r.index<n[h]&&d.apply(l,r.slice(1)),a=r[0][h],p=o,l[h]>=f))break;w[m]===r.index&&w[m]++}return p===n[h]?!a&&w.test("")||l.push(""):l.push(n.slice(p)),l[h]>f?l.slice(0,f):l}:"0"[f](void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)}:i,[function(i,s){var n=e(this),r=void 0==i?void 0:i[t];return void 0!==r?r.call(i,n,s):_.call(String(n),i,s)},function(e,t){var s=c(_,e,this,t,_!==i);if(s.done)return s.value;var u=n(e),d=String(this),f=r(u,RegExp),h=u.unicode,m=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(w?"y":"g"),b=new f(w?u:"^(?:"+u.source+")",m),C=void 0===t?v:t>>>0;if(0===C)return[];if(0===d.length)return null===l(b,d)?[d]:[];var S=0,g=0,x=[];while(g<d.length){b.lastIndex=w?g:0;var y,P=l(b,w?d:d.slice(g));if(null===P||(y=p(a(b.lastIndex+(w?0:g)),d.length))===S)g=o(d,g,h);else{if(x.push(d.slice(S,g)),x.length===C)return x;for(var k=1;k<=P.length-1;k++)if(x.push(P[k]),x.length===C)return x;g=S=y}}return x.push(d.slice(S)),x}]}))},4020:function(e,t,i){},5040:function(e,t,i){"use strict";var s=i("02bc"),n=i.n(s);n.a},"588e":function(e,t,i){"use strict";var s=i("1e7e"),n=i.n(s);n.a},6412:function(e,t,i){"use strict";var s=i("27bc"),n=i.n(s);n.a},"91b9":function(e,t,i){var s={"./em_check/Filter.vue":["7686","chunk-2d0d7313"],"./em_date/Filter.vue":["769c","chunk-49bd6bda"],"./em_file/Filter.vue":["aa98","chunk-2d212c35"],"./em_list/Filter.vue":["7c85","chunk-cf0d4de0"],"./em_node/Filter.vue":["2ad4","chunk-83926d96"],"./em_primary/Filter.vue":["c330","chunk-2d216783"],"./em_string/Filter.vue":["9171","chunk-2d0e48e8"],"./em_text/Filter.vue":["6edd","chunk-2d0db4a5"]};function n(e){if(!i.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],n=t[0];return i.e(t[1]).then((function(){return i(n)}))}n.keys=function(){return Object.keys(s)},n.id="91b9",e.exports=n},a805:function(e,t,i){"use strict";var s=i("dd8b"),n=i.n(s);n.a},b583:function(e,t,i){},dd8b:function(e,t,i){},ddc5:function(e,t,i){"use strict";var s=i("4020"),n=i.n(s);n.a}}]);
//# sourceMappingURL=chunk-505ddac0.5ad2aeff.js.map