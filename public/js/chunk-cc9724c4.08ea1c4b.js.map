{"version":3,"sources":["webpack:///./src/components/fields/em_file/Field.vue","webpack:///src/components/fields/em_file/Field.vue","webpack:///./src/components/fields/em_file/Field.vue?a876","webpack:///./src/components/fields/em_file/Field.vue?aab6","webpack:///./node_modules/core-js/modules/es6.regexp.match.js","webpack:///./node_modules/core-js/modules/es6.string.small.js","webpack:///./src/components/fields/em_file/Field.vue?fc64"],"names":["render","_vm","this","_c","_self","staticClass","on","$event","openPopup","_l","localValue","item","noShow","_e","type","attrs","sizes","small","path","countFiels","_v","_s","$t","showPopup","directives","name","rawName","value","closePopup","expression","index","removeFile","openSubPopup","showSubPopup","closeSubPopup","tabs","class","active","setActiveTab","isUploading","percentUploadOfProgress","style","width","cancelUpload","activeTab","ref","uploadFile","link","domProps","target","composing","staticRenderFns","props","data","cancelToken","computed","count","fieldCode","tableCode","methods","formData","file","axios","method","headers","url","onUploadProgress","loaded","total","catch","success","message","result","newFile","setUploadProgressStatus","updateUploadProgress","percent","clearUploadProgress","sendValue","newValue","settings","setPreviewForImage","setPreview","tab","watch","created","component","anObject","toLength","advanceStringIndex","regExpExec","defined","MATCH","$match","maybeCallNative","regexp","O","fn","undefined","call","RegExp","String","res","done","rx","S","global","fullUnicode","unicode","lastIndex","A","n","matchStr","createHTML"],"mappings":"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","file":"js/chunk-cc9724c4.08ea1c4b.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"em-file-item-col\",on:{\"click\":function($event){return _vm.openPopup()}}},[_vm._l((_vm.localValue),function(item){return (!item.noShow)?_c('div',{staticClass:\"em-file-item-wrapper\"},[(item.type == 'image')?_c('img',{attrs:{\"src\":item.sizes.small.path,\"alt\":\"\"}}):_c('svg',[_c('use',{attrs:{\"xlink:href\":\"#attachment\"}})])]):_vm._e()}),(_vm.countFiels == 0)?[_c('span',{staticClass:\"el-empty\"},[_vm._v(_vm._s(_vm.$t('empty')))])]:_vm._e(),(_vm.showPopup)?_c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.closePopup),expression:\"closePopup\"}],staticClass:\"em-file__edit\"},[_vm._l((_vm.localValue),function(item,index){return (!item.noShow)?_c('div',{staticClass:\"em-file__edit-item\"},[(item.type == 'image')?_c('img',{staticClass:\"em-file__edit-attach\",attrs:{\"src\":item.sizes.small.path,\"alt\":\"\"}}):_c('svg',{staticClass:\"em-file__edit-attach\"},[_c('use',{attrs:{\"xlink:href\":\"#attachment\"}})]),_c('a',{attrs:{\"href\":item.path,\"target\":\"_blank\"}},[_vm._v(\"Download\")]),_c('a',{attrs:{\"href\":\"javascript:void(0);\"},on:{\"click\":function($event){return _vm.removeFile(index)}}},[_vm._v(_vm._s(_vm.$t('remove')))])]):_vm._e()}),(_vm.countFiels == 0)?[_c('div',{staticClass:\"em-file__empty-pop\"},[_c('span',{staticClass:\"el-empty\"},[_vm._v(_vm._s(_vm.$t('fieldEmFile.no_files')))])])]:_vm._e(),_c('button',{staticClass:\"el-gbtn\",on:{\"click\":function($event){return _vm.openSubPopup()}}},[_vm._v(_vm._s(_vm.$t('fieldEmFile.add_file')))]),(_vm.showSubPopup)?_c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.closeSubPopup),expression:\"closeSubPopup\"}],staticClass:\"em-file__upload-popup\"},[_c('div',{staticClass:\"em-file__upload-tab-wrapper\"},[_c('div',{staticClass:\"em-file__upload-tabs-head\"},_vm._l((_vm.tabs),function(item){return _c('div',{staticClass:\"em-file__upload-tab-item\",class:{active: item.active},on:{\"click\":function($event){return _vm.setActiveTab(item)}}},[_vm._v(_vm._s(item.name))])}),0),_c('div',{staticClass:\"em-file__upload-tabs-content-wrapper\"},[(_vm.isUploading)?_c('div',{staticClass:\"em-file__progress-tab\"},[_c('div',{staticClass:\"em-file__progressbar\"},[_c('div',{staticClass:\"em-file__progressbar-text\"},[_vm._v(_vm._s(_vm.percentUploadOfProgress)+\"%\")]),_c('div',{staticClass:\"em-file__progressbar-done\",style:({ width: _vm.percentUploadOfProgress+'%' })})]),_c('button',{staticClass:\"el-gbtn\",on:{\"click\":_vm.cancelUpload}},[_vm._v(_vm._s(_vm.$t('cancel')))])]):[(_vm.activeTab == _vm.$t('upload'))?_c('div',{staticClass:\"em-file__file-tab\"},[_c('input',{ref:\"emFile\",staticClass:\"em-file\",attrs:{\"type\":\"file\",\"multiple\":\"true\",\"name\":\"file\",\"id\":\"file\"},on:{\"change\":function($event){return _vm.uploadFile('file')}}}),_c('label',{staticClass:\"el-btn\",attrs:{\"for\":\"file\"}},[_vm._v(_vm._s(_vm.$t('fieldEmFile.choose_file')))])]):_vm._e(),(_vm.activeTab == _vm.$t('upload_by_link'))?_c('div',{staticClass:\"em-file__link-tab\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.link),expression:\"link\"}],staticClass:\"el-inp em-file__embed-input\",attrs:{\"type\":\"text\",\"placeholder\":_vm.$t('paste_link')},domProps:{\"value\":(_vm.link)},on:{\"change\":function($event){return _vm.uploadFile('link')},\"input\":function($event){if($event.target.composing)return;_vm.link=$event.target.value}}}),_c('button',{staticClass:\"el-btn\",on:{\"click\":function($event){return _vm.uploadFile('link')}}},[_vm._v(_vm._s(_vm.$t('fieldEmFile.embed_link')))])]):_vm._e()]],2)])]):_vm._e()],2):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"em-file-item-col\" @click=\"openPopup()\">\n\t\t<div\n\t\t\tclass=\"em-file-item-wrapper\"\n\t\t\tv-for=\"item in localValue\"\n\t\t\tv-if=\"!item.noShow\"\n\t\t>\n\t\t\t<img v-if=\"item.type == 'image'\" :src=\"item.sizes.small.path\" alt=\"\"/>\n\t\t\t<svg v-else>\n\t\t\t\t<use xlink:href=\"#attachment\"></use>\n\t\t\t</svg>\n\t\t</div>\n\t\t<template v-if=\"countFiels == 0\">\n\t\t\t<span class=\"el-empty\">{{$t('empty')}}</span>\n\t\t</template>\n\t\t<div class=\"em-file__edit\" v-if=\"showPopup\" v-click-outside=\"closePopup\">\n\t\t\t<div\n\t\t\t\tclass=\"em-file__edit-item\"\n\t\t\t\tv-for=\"(item, index) in localValue\"\n\t\t\t\tv-if=\"!item.noShow\"\n\t\t\t>\n\t\t\t\t<img v-if=\"item.type == 'image'\" class=\"em-file__edit-attach\" :src=\"item.sizes.small.path\" alt=\"\"/>\n\t\t\t\t<svg v-else class=\"em-file__edit-attach\">\n\t\t\t\t\t<use xlink:href=\"#attachment\"></use>\n\t\t\t\t</svg>\n\t\t\t\t<a :href=\"item.path\" target=\"_blank\">Download</a>\n\t\t\t\t<a href=\"javascript:void(0);\" @click=\"removeFile(index)\">{{$t('remove')}}</a>\n\t\t\t</div>\n\t\t\t<template v-if=\"countFiels == 0\">\n\t\t\t\t<div class=\"em-file__empty-pop\">\n\t\t\t\t\t<span class=\"el-empty\">{{$t('fieldEmFile.no_files')}}</span>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<button class=\"el-gbtn\" @click=\"openSubPopup()\">{{$t('fieldEmFile.add_file')}}</button>\n\t\t\t<div class=\"em-file__upload-popup\"\n\t\t\t\tv-if=\"showSubPopup\"\n\t\t\t\tv-click-outside=\"closeSubPopup\"\n\t\t\t>\n\t\t\t\t<div class=\"em-file__upload-tab-wrapper\">\n\t\t\t\t\t<div class=\"em-file__upload-tabs-head\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"em-file__upload-tab-item\"\n\t\t\t\t\t\t\t@click=\"setActiveTab(item)\"\n\t\t\t\t\t\t\tv-for=\"item in tabs\"\n\t\t\t\t\t\t\t:class=\"{active: item.active}\"\n\t\t\t\t\t\t>{{item.name}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"em-file__upload-tabs-content-wrapper\">\n\t\t\t\t\t\t<div class=\"em-file__progress-tab\" v-if=\"isUploading\">\n\t\t\t\t\t\t\t<div class=\"em-file__progressbar\">\n\t\t\t\t\t\t\t\t<div class=\"em-file__progressbar-text\">{{ percentUploadOfProgress }}%</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"em-file__progressbar-done\"\n\t\t\t\t\t\t\t\t\t:style=\"{ width: percentUploadOfProgress+'%' }\"\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button @click=cancelUpload class=\"el-gbtn\">{{ $t('cancel') }}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class=\"em-file__file-tab\" v-if=\"activeTab == $t('upload')\">\n\t\t\t\t\t\t\t\t<input type=\"file\" multiple=\"true\" name=\"file\" ref=\"emFile\" @change=\"uploadFile('file')\" id=\"file\" class=\"em-file\" />\n\t\t\t\t\t\t\t\t<label class=\"el-btn\" for=\"file\">{{$t('fieldEmFile.choose_file')}}</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"em-file__link-tab\"\n\t\t\t\t\t\t\t\tv-if=\"activeTab == $t('upload_by_link')\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclass=\"el-inp em-file__embed-input\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$t('paste_link')\"\n\t\t\t\t\t\t\t\t\tv-model=\"link\"\n\t\t\t\t\t\t\t\t\t@change=\"uploadFile('link')\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button @click=\"uploadFile('link')\" class=\"el-btn\">{{$t('fieldEmFile.embed_link')}}</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script>\n\timport axios from 'axios';\n\n\texport default\n\t{\n\t\tprops: ['fieldValue','fieldSettings','mode', 'view'],\n\t\t/**\n\t\t * Глобальные переменные странциы\n\t\t */\n\t\tdata()\n\t\t{\n\t\t\treturn {\n\t\t\t\tlocalValue   : false,\n\t\t\t\tshowPopup    : false,\n\t\t\t\tshowSubPopup : false,\n\t\t\t\ttabs:\n\t\t\t\t[\n\t\t\t\t\t{ name: this.$t('upload'), active: true },\n\t\t\t\t\t{ name: this.$t('upload_by_link'), active: false },\n\t\t\t\t],\n\t\t\t\tactiveTab: this.$t('upload'),\n\t\t\t\tlink: '',\n\t\t\t\tpercentUploadOfProgress : 0,\n\t\t\t\tisUploading             : false,\n\t\t\t\tcancelToken             : null,\n\t\t\t};\n\t\t},\n\t\tcomputed:\n\t\t{\n\t\t\tcountFiels()\n\t\t\t{\n\t\t\t\tvar count = 0;\n\n\t\t\t\tif(!this.localValue)\n\t\t\t\t\treturn count;\n\n\t\t\t\tfor(var index in this.localValue)\n\t\t\t\t{\n\t\t\t\t\tif(!this.localValue[index].noShow)\n\t\t\t\t\t\tcount++;\n\t\t\t\t}\n\n\t\t\t\treturn count;\n\t\t\t},\n\t\t\tfieldCode()\n\t\t\t{\n\t\t\t\tif(typeof this.fieldSettings.fieldCode !== 'undefined')\n\t\t\t\t\treturn this.fieldSettings.fieldCode;\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\ttableCode()\n\t\t\t{\n\t\t\t\tif(typeof this.fieldSettings.tableCode !== 'undefined')\n\t\t\t\t\treturn this.fieldSettings.tableCode;\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t},\n\t\tmethods:\n\t\t{\n\t\t\t/**\n\t\t\t * Загрузить изображение\n\t\t\t */\n\t\t\tasync uploadFile(type)\n\t\t\t{\n\t\t\t\tif(!this.localValue)\n\t\t\t\t\tthis.$set(this, 'localValue', []);\n\n\t\t\t\tlet formData   = new FormData();\n\n\t\t\t\tformData.append('tableCode', this.tableCode);\n\t\t\t\tformData.append('fieldCode', this.fieldCode);\n\n\t\t\t\tif(type == 'link')\n\t\t\t\t{\n\t\t\t\t\tformData.append('typeUpload', 'link');\n\t\t\t\t\tformData.append('link', this.link);\n\t\t\t\t}\n\t\t\t\telse if(type == 'file')\n\t\t\t\t{\n\t\t\t\t\tif (typeof this.$refs.emFile == 'undefined' || this.$refs.emFile.length == 0)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tfor(var file of this.$refs.emFile.files)\n\t\t\t\t\t\tformData.append(`${this.fieldCode}[]`, file);\n\n\t\t\t\t\tformData.append('typeUpload', 'file');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn;\n\n\t\t\t\tif(this.view == 'table')\n\t\t\t\t\tformData.append('prepareForSave', true);\n\n\t\t\t\tthis.cancelToken = axios.CancelToken.source();\n\n\t\t\t\tthis.setUploadProgressStatus(true);\n\t\t\t\tlet result = await axios({\n\t\t\t\t\tmethod           : 'POST',\n\t\t\t\t\tdata             : formData,\n\t\t\t\t\theaders          : { 'Content-Type': 'multipart/form-data' },\n\t\t\t\t\turl              : '/field/em_file/index/upload/',\n\t\t\t\t\tcancelToken      : this.cancelToken.token,\n\t\t\t\t\tonUploadProgress : (e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.updateUploadProgress({ loaded: e.loaded, total: e.total });\n\t\t\t\t\t},\n\t\t\t\t}).catch(err =>\n\t\t\t\t{\n\t\t\t\t\tif (err.__proto__.__CANCEL__)\n\t\t\t\t\t\treturn { data: {\n\t\t\t\t\t\t\tsuccess: false,\n\t\t\t\t\t\t\tmessage: err.message,\n\t\t\t\t\t\t}};\n\t\t\t\t});\n\t\t\t\tthis.setUploadProgressStatus(false);\n\n\t\t\t\tif(!result.data.success)\n\t\t\t\t{\n\t\t\t\t\tthis.ElMessage.error(result.data.message);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tfor(var newFile of result.data.value)\n\t\t\t\t\tthis.localValue.push(newFile);\n\n\t\t\t\tthis.sendValue();\n\t\t\t\tthis.closeSubPopup();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * (де)активирует отображение процесса загрузки\n\t\t\t */\n\t\t\tsetUploadProgressStatus(active)\n\t\t\t{\n\t\t\t\tthis.clearUploadProgress();\n\t\t\t\tthis.$set(this, 'isUploading', !!active);\n\t\t\t},\n\t\t\t/**\n\t\t\t * обновляет отображение загрузки\n\t\t\t */\n\t\t\tupdateUploadProgress({ percent = 0, loaded = 0, total = 0 })\n\t\t\t{\n\t\t\t\tif (!percent && total)\n\t\t\t\t\tpercent = Math.floor((loaded * 100) / total);\n\n\t\t\t\tif (percent < 0)\n\t\t\t\t\tthis.$set(this, 'percentUploadOfProgress', 0);\n\t\t\t\telse if (percent > 100)\n\t\t\t\t\tthis.$set(this, 'percentUploadOfProgress', 100);\n\t\t\t\telse\n\t\t\t\t\tthis.$set(this, 'percentUploadOfProgress', percent);\n\t\t\t},\n\t\t\t/**\n\t\t\t * очищает прогресс загрузки\n\t\t\t */\n\t\t\tclearUploadProgress()\n\t\t\t{\n\t\t\t\tthis.$set(this, 'percentUploadOfProgress', 0);\n\t\t\t},\n\t\t\t/**\n\t\t\t * отмена загрузки\n\t\t\t */\n\t\t\tasync cancelUpload()\n\t\t\t{\n\t\t\t\tif (this.cancelToken)\n\t\t\t\t{\n\t\t\t\t\tconst result = await this.cancelToken.cancel(this.$t('fieldEmFile.uploading_canceled_by_the_user'));\n\t\t\t\t\tthis.cancelToken = null;\n\t\t\t\t}\n\t\t\t\tthis.clearUploadProgress();\n\t\t\t},\n\t\t\t/**\n\t\t\t * Удалить файл\n\t\t\t */\n\t\t\tasync removeFile(index)\n\t\t\t{\n\t\t\t\tif(typeof this.localValue[index].new != 'undefined')\n\t\t\t\t{\n\t\t\t\t\tthis.$delete(this.localValue, index);\n\t\t\t\t\tthis.sendValue();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.$set(this.localValue[index], 'delete', true);\n\t\t\t\tthis.$set(this.localValue[index], 'noShow', true);\n\n\t\t\t\tthis.sendValue();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Отправить измененное значение родителю\n\t\t\t */\n\t\t\tsendValue(newValue)\n\t\t\t{\n\t\t\t\tthis.$emit('onChange', {\n\t\t\t\t\tvalue     : this.localValue,\n\t\t\t\t\tsettings  : this.fieldSettings,\n\t\t\t\t\ttableCode : this.tableCode,\n\t\t\t\t\tfieldCode : this.fieldCode\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Установить превью для url\n\t\t\t */\n\t\t\tsetPreviewForImage(url, index)\n\t\t\t{\n\t\t\t\tif(url.match(/\\.(jpeg|jpg|gif|png)$/) == null)\n\t\t\t\t\turl = false;\n\n\t\t\t\tthis.setPreview(url, index);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Установать превью\n\t\t\t */\n\t\t\tsetPreview(url, index)\n\t\t\t{\n\t\t\t\tvar item = this.localValue[index];\n\n\t\t\t\titem.type  = (url == false) ? 'no-image' : 'image';\n\t\t\t\titem.sizes = {\n\t\t\t\t\tsmall: {\n\t\t\t\t\t\tpath: url\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.$set(this.localValue, index, item);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Задать активность табу\n\t\t\t */\n\t\t\tsetActiveTab(tab)\n\t\t\t{\n\t\t\t\tif (this.isUploading) return false;\n\t\t\t\tfor (var item of this.tabs)\n\t\t\t\t\titem.active = false;\n\n\t\t\t\ttab.active = true;\n\t\t\t\tthis.activeTab = tab.name;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Закрыть/Открыть попап\n\t\t\t */\n\t\t\topenPopup()\n\t\t\t{\n\t\t\t\tthis.showPopup = true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Закрыть/Открыть попап\n\t\t\t */\n\t\t\topenSubPopup()\n\t\t\t{\n\t\t\t\tthis.showSubPopup = true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Закрыть попап\n\t\t\t */\n\t\t\tclosePopup()\n\t\t\t{\n\t\t\t\tthis.showPopup = false;\n\t\t\t\tthis.closeSubPopup();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Закрыть попап\n\t\t\t */\n\t\t\tcloseSubPopup()\n\t\t\t{\n\t\t\t\tthis.showSubPopup = false;\n\t\t\t},\n\t\t},\n\t\twatch:\n\t\t{\n\t\t\t/**\n\t\t\t * Отслеживать изменение значения у родителя\n\t\t\t */\n\t\t\t'fieldValue'(newValue)\n\t\t\t{\n\t\t\t\tthis.localValue = newValue;\n\t\t\t},\n\t\t},\n\t\t/**\n\t\t * Функция создания компонента\n\t\t */\n\t\tcreated()\n\t\t{\n\t\t\tthis.localValue = this.fieldValue;\n\t\t},\n\t};\n</script>\n<style lang=\"scss\">\n\t.em-file-item-col\n\t{\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\talign-items: center;\n\t\tposition: absolute;\n\t\tleft:0px;\n\t\ttop:0px;\n\t\theight: 100%;\n\t\twidth:100%;\n\t\tpadding-left:10px;\n\t\tcursor: pointer;\n\t}\n\t.detail-field-box .em-file-item-col{padding-left:0px;}\n\t.em-file-item-wrapper\n\t{\n\t\twidth: 14px;\n\t\theight: 14px;\n\t\tmargin-right: 3px;\n\t\tcursor: pointer;\n\t\timg\n\t\t{\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tobject-fit: cover;\n\t\t}\n\t\tsvg\n\t\t{\n\t\t\twidth:100%;\n\t\t\theight:100%;\n\t\t\tfill: #677387;\n\t\t}\n\t}\n\t.em-file__upload-popup\n\t{\n\t\tbackground: #FFFFFF;\n\t\tborder: 1px solid rgba(103, 115, 135, 0.1);\n\t\tbox-shadow: 0px 4px 6px rgba(200, 200, 200, 0.25);\n\t\tborder-radius: 2px;\n\t\twidth: 326px;\n\t\tposition: absolute;\n\t\tpadding-top:5px;\n\t\tz-index: 5;\n\t    top:calc(100% + 5px);\n\t    left: 50%;\n\t    margin-left:-163px;\n\t}\n\t.em-file__upload-tab-item\n\t{\n\t\tfont-size: 10px;\n\t\tcolor: rgba(25, 28, 33, 0.7);;\n\t\tpadding: 0 6px;\n\t\theight: 25px;\n\t\tline-height: 25px;\n\t\tmargin-right: 8px;\n\t\tborder-bottom: 2px solid transparent;\n\t\tcursor: pointer;\n\t\t&:last-child {margin-right: unset; }\n\t\t&.active {border-bottom: 2px solid #191C21; color: #191C21; }\n\t}\n\t.em-file__upload-tabs-head\n\t{\n\t\tdisplay: flex;\n\t\theight: 25px;\n\t\talign-items: center;\n\t\tborder-bottom: 2px solid rgba(103, 115, 135, 0.1);\n\t}\n\t.em-file__upload-tab-wrapper {padding: 0 9px; }\n\t.em-file__upload-tabs-content-wrapper\n\t{\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t.em-file__link-tab{width:255px;margin:0 auto; text-align: right; padding:22px 0;}\n\t.em-file__embed-input {width:255px; margin-bottom: 10px;}\n\t.em-file\n\t{\n\t\twidth: 0.1px;\n\t\theight: 0.1px;\n\t\topacity: 0;\n\t\toverflow: hidden;\n\t\tposition: absolute;\n\t\tz-index: -1;\n\t}\n\t.em-file__file-tab{padding:22px 0; }\n\n\t.em-file__edit\n\t{\n\t\tposition: absolute;\n\t\ttop:-5px;\n\t\tleft:-5px;\n\t\twidth:calc(100% + 10px);\n\t\tmin-width: 169px;\n\t\tmin-height: 60px;\n\t\tbackground: #fff;\n\t\tpadding-left:10px;\n\t\tz-index: 1;\n\t\tborder-radius: 2px;\n\t\tbox-shadow: 0px 4px 6px rgba(200, 200, 200, 0.25);\n\t\tborder: 1px solid rgba(103, 115, 135, 0.1);\n\t\tpadding-bottom:10px;\n\t}\n\t.em-file__empty-pop{height: 50px;line-height: 50px;}\n\t.em-file__edit-item\n\t{\n\t\tpadding:7px 0;\n\t\tdisplay: flex;\n\t\tword-break: break-word;\n\t\talign-items: center;\n\t\ta{\n\t\t    color: rgba(25, 28, 33, 0.4);\n\t\t    text-decoration: none;\n\t\t    font-size: 12px;\n\t\t    margin-right:5px;\n\t\t    &:hover{text-decoration: underline;}\n\t\t}\n\t}\n\t.em-file__edit-attach\n\t{\n\t\twidth:25px;\n\t\theight: 25px;\n\t\tmargin-right: 10px;\n\t\tborder:1px solid rgba(103, 115, 135, 0.3);\n\t\tborder-radius: 2px;\n\t\tfill:rgba(103, 115, 135, 0.3);\n\t}\n\t.em-file__progress-tab\n\t{\n\t\twidth: 100%;\n\t\tpadding: 25px 12px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbutton { margin-left: auto; }\n\t}\n\t.em-file__progressbar\n\t{\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\tbackground-color: rgba(103, 115, 135, 0.1);\n\t\theight: 20px;\n\t\tmargin-bottom: 18px;\n\t\toverflow: hidden;\n\t}\n\t.em-file__progressbar-text\n\t{\n\t\tfont-size: 8px;\n\t\tline-height: 11px;\n\t\tposition: absolute;\n\t\tleft: 7px;\n\t\ttop: 5px;\n\t}\n\t.em-file__progressbar-done\n\t{\n\t\theight: 100%;\n\t\tbackground-color: rgba(103, 115, 135, 0.1);\n\t\ttransition: width 0.5s ease-out;\n\t}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Field.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Field.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Field.vue?vue&type=template&id=5c120c48&\"\nimport script from \"./Field.vue?vue&type=script&lang=js&\"\nexport * from \"./Field.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Field.vue?vue&type=style&index=0&id=5c120c48&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\n\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar advanceStringIndex = require('./_advance-string-index');\nvar regExpExec = require('./_regexp-exec-abstract');\n\n// @@match logic\nrequire('./_fix-re-wks')('match', 1, function (defined, MATCH, $match, maybeCallNative) {\n  return [\n    // `String.prototype.match` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.match\n    function match(regexp) {\n      var O = defined(this);\n      var fn = regexp == undefined ? undefined : regexp[MATCH];\n      return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n    },\n    // `RegExp.prototype[@@match]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@match\n    function (regexp) {\n      var res = maybeCallNative($match, regexp, this);\n      if (res.done) return res.value;\n      var rx = anObject(regexp);\n      var S = String(this);\n      if (!rx.global) return regExpExec(rx, S);\n      var fullUnicode = rx.unicode;\n      rx.lastIndex = 0;\n      var A = [];\n      var n = 0;\n      var result;\n      while ((result = regExpExec(rx, S)) !== null) {\n        var matchStr = String(result[0]);\n        A[n] = matchStr;\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n        n++;\n      }\n      return n === 0 ? null : A;\n    }\n  ];\n});\n","'use strict';\n// B.2.3.11 String.prototype.small()\nrequire('./_string-html')('small', function (createHTML) {\n  return function small() {\n    return createHTML(this, 'small', '', '');\n  };\n});\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Field.vue?vue&type=style&index=0&id=5c120c48&prod&lang=scss&\""],"sourceRoot":""}