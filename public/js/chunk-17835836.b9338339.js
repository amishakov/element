(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17835836"],{"21e6":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"em-file-item-col",on:{click:function(t){return e.openPopup()}}},[e._l(e.dataField,function(e){return i("div",{staticClass:"em-file-item-wrapper"},[i("img",{attrs:{src:"image"==e.type?e.sizes.small:"/images/fileicon.png",alt:""}})])}),e.dataField?e._e():[i("span",{staticClass:"el-empty"},[e._v("Empty")])],e.showPopup?i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closePopup,expression:"closePopup"}],staticClass:"em-file__edit"},[e._l(e.dataField,function(t,a){return i("div",{staticClass:"em-file__edit-item"},[i("img",{staticClass:"em-file__edit-attach",attrs:{src:"image"==t.type?t.sizes.small:"/images/fileicon.png",alt:""}}),i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(i){return e.removeFile(""+t.upName)}}},[e._v("remove")])])}),e.dataField?e._e():[e._m(0)],i("button",{staticClass:"el-gbtn",on:{click:function(t){return e.openSubPopup()}}},[e._v("Add file")]),e.showSubPopup?i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeSubPopup,expression:"closeSubPopup"}],staticClass:"em-file__upload-popup"},[i("div",{staticClass:"em-file__upload-tab-wrapper"},[i("div",{staticClass:"em-file__upload-tabs-head"},e._l(e.tabs,function(t){return i("div",{staticClass:"em-file__upload-tab-item",class:{active:t.active},on:{click:function(i){return e.setActiveTab(t)}}},[e._v(e._s(t.name))])}),0),i("div",{staticClass:"em-file__upload-tabs-content-wrapper"},["Upload"==e.activeTab?i("div",{staticClass:"em-file__file-tab"},[i("input",{ref:"emFile",staticClass:"em-file",attrs:{type:"file",multiple:"true",name:"file",id:"file"},on:{change:function(t){return e.uploadFile("file")}}}),i("label",{staticClass:"el-btn",attrs:{for:"file"}},[e._v("Choose File")])]):e._e(),"Upload by link"==e.activeTab?i("div",{staticClass:"em-file__link-tab"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.link,expression:"link"}],staticClass:"el-inp em-file__embed-input",attrs:{type:"text",placeholder:"Paste link"},domProps:{value:e.link},on:{change:function(t){return e.uploadFile("link")},input:function(t){t.target.composing||(e.link=t.target.value)}}}),i("button",{staticClass:"el-btn"},[e._v("Embed Link")])]):e._e()])])]):e._e()],2):e._e()],2)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"em-file__empty-pop"},[i("span",{staticClass:"el-empty"},[e._v("No files")])])}],s=(i("7f7f"),i("ac4d"),i("8a81"),i("ac6a"),i("b54a"),i("96cf"),i("3b8d")),l={props:["fieldValue","fieldSettings"],data:function(){return{showPopup:!1,showSubPopup:!1,dataField:!1,tabs:[{name:"Upload",active:!0},{name:"Upload by link",active:!1}],activeTab:"Upload",link:""}},methods:{uploadFile:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var i,a,n,s,l,r,o,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=new FormData,i.append("tableCode",this.fieldSettings.tableCode),i.append("fieldCode",this.fieldSettings.fieldCode),i.append("primaryKey",this.fieldSettings.primaryKey.fieldCode),i.append("primaryKeyValue",this.fieldSettings.primaryKey.value),i.append("typeUpload",t),i.append("link",this.link),"undefined"==typeof this.$refs.emFile){e.next=27;break}for(a=!0,n=!1,s=void 0,e.prev=11,l=this.$refs.emFile.files[Symbol.iterator]();!(a=(r=l.next()).done);a=!0)o=r.value,i.append("files"+o.name,o);e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](11),n=!0,s=e.t0;case 19:e.prev=19,e.prev=20,a||null==l.return||l.return();case 22:if(e.prev=22,!n){e.next=25;break}throw s;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return e.next=29,this.$axios({method:"POST",data:i,headers:{"Content-Type":"multipart/form-data"},url:"/field/em_file/index/upload/"});case 29:if(u=e.sent,u.data.success){e.next=32;break}return e.abrupt("return",!1);case 32:this.closePopup();case 33:case"end":return e.stop()}},e,this,[[11,15,19,27],[20,,22,26]])}));function t(t){return e.apply(this,arguments)}return t}(),removeFile:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=new FormData,i.append("tableCode",this.fieldSettings.tableCode),i.append("fieldCode",this.fieldSettings.fieldCode),i.append("primaryKey",this.fieldSettings.primaryKey.fieldCode),i.append("primaryKeyValue",this.fieldSettings.primaryKey.value),i.append("fileName",t),e.next=8,this.$axios({method:"POST",data:i,headers:{"Content-Type":"multipart/form-data"},url:"/field/em_file/index/delete/"});case 8:if(a=e.sent,a.data.success){e.next=11;break}return e.abrupt("return",!1);case 11:this.$emit("onChange",{value:a.data.value,settings:this.fieldSettings});case 12:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),setActiveTab:function(e){var t=!0,i=!1,a=void 0;try{for(var n,s=this.tabs[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var l=n.value;l.active=!1}}catch(r){i=!0,a=r}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}e.active=!0,this.activeTab=e.name},openPopup:function(){this.showPopup=!0},openSubPopup:function(){this.showSubPopup=!0},closePopup:function(){this.showPopup=!1},closeSubPopup:function(){this.showSubPopup=!1}},mounted:function(){this.dataField=this.fieldValue}},r=l,o=(i("b242"),i("2877")),u=Object(o["a"])(r,a,n,!1,null,null,null);t["default"]=u.exports},"2bf0":function(e,t,i){},"386b":function(e,t,i){var a=i("5ca1"),n=i("79e5"),s=i("be13"),l=/"/g,r=function(e,t,i,a){var n=String(s(e)),r="<"+t;return""!==i&&(r+=" "+i+'="'+String(a).replace(l,"&quot;")+'"'),r+">"+n+"</"+t+">"};e.exports=function(e,t){var i={};i[e]=t(r),a(a.P+a.F*n(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",i)}},b242:function(e,t,i){"use strict";var a=i("2bf0"),n=i.n(a);n.a},b54a:function(e,t,i){"use strict";i("386b")("link",function(e){return function(t){return e(this,"a","href",t)}})}}]);
//# sourceMappingURL=chunk-17835836.b9338339.js.map