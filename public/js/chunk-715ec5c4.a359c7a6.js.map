{"version":3,"sources":["webpack:///./src/pages/table/detail.vue?fb31","webpack:///src/pages/table/detail.vue","webpack:///./src/pages/table/detail.vue?5aea","webpack:///./src/pages/table/detail.vue","webpack:///./src/components/tviews/Detail.vue?c156","webpack:///./src/mixins/detailFunctions.js","webpack:///./src/components/tviews/Detail.vue?5f39","webpack:///src/components/tviews/Detail.vue","webpack:///./src/components/tviews/Detail.vue?84fd","webpack:///./src/components/tviews/Detail.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","$route","params","tableCode","name","id","updatedElAt","on","$event","$set","cancel","openDetail","saveElementDetail","removeElementDetail","createElementDetail","_e","staticRenderFns","components","Detail","mixins","data","show","methods","result","mounted","component","saveElement","$store","dispatch","createElement","primaryKeyCode","getters","getPrimaryKeyCode","setValues","selectedElement","fieldCode","insertData","qs","stringify","insert","table","values","$axios","post","removeElement","delete","where","operation","fields","code","value","staticClass","class","isShowSidebar","_v","_s","$t","remove","_l","column","columnCode","key","columnEmSettings","type_info","getColumnName","columns","em","settings","getColumnSettings","changeFieldValue","props","MainField","MobileBurger","computed","mapGetters","fieldNames","watch","newId","val","selectElement","requestParams","select","order","fieldValue"],"mappings":"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","file":"js/chunk-715ec5c4.a359c7a6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.show)?_c('Detail',{attrs:{\"tableCode\":_vm.$route.params.tableCode,\"name\":_vm.$route.name,\"id\":_vm.$route.params.id,\"updatedElAt\":_vm.updatedElAt},on:{\"update:id\":function($event){return _vm.$set(_vm.$route.params, \"id\", $event)},\"update:updatedElAt\":function($event){_vm.updatedElAt=$event},\"update:updated-el-at\":function($event){_vm.updatedElAt=$event},\"cancel\":_vm.cancel,\"openDetail\":_vm.openDetail,\"saveElement\":_vm.saveElementDetail,\"removeElement\":_vm.removeElementDetail,\"createElement\":_vm.createElementDetail}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<Detail\n\t\t:tableCode=\"$route.params.tableCode\"\n\t\t:name=\"$route.name\"\n\t\t:id.sync=\"$route.params.id\"\n\t\t:updatedElAt.sync=\"updatedElAt\"\n\t\t@cancel=\"cancel\"\n\t\t@openDetail=\"openDetail\"\n\t\t@saveElement=\"saveElementDetail\"\n\t\t@removeElement=\"removeElementDetail\"\n\t\t@createElement=\"createElementDetail\"\n\t\tv-if=\"show\"\n\t/>\n</template>\n<script>\n\timport Detail from '@/components/tviews/Detail.vue';\n\timport detailFunctions from '@/mixins/detailFunctions.js';\n\texport default\n\t{\n\t\tcomponents: {Detail},\n\t\tmixins: [detailFunctions],\n\t\tdata()\n\t\t{\n\t\t\treturn {\n\t\t\t\tshow:false,\n\t\t\t\tupdatedElAt: new Date(),\n\t\t\t}\n\t\t},\n\t\tmethods:\n\t\t{\n\t\t\tcancel()\n\t\t\t{\n\t\t\t\tthis.$router.go(-1);\n\t\t\t},\n\t\t\topenDetail({tableCode,id})\n\t\t\t{\n\t\t\t\tthis.$router.push({name:'tableDetail', params:{tableCode, id }});\n\t\t\t},\n\t\t\tasync saveElementDetail(data)\n\t\t\t{\n\t\t\t\tlet result = await this.saveElement(data);\n\t\t\t\tthis.updatedElAt = new Date();\n\t\t\t\tif (result.data.success)\n\t\t\t\t\tthis.ElMessage(this.$t('elMessages.element_saved'));\n\t\t\t},\n\t\t\tasync createElementDetail(data)\n\t\t\t{\n\t\t\t\tlet result = await this.createElement(data);\n\t\t\t\tif (result.data.success)\n\t\t\t\t{\n\t\t\t\t\tthis.openDetail({tableCode:data.tableCode, id:result.data.lastid});\n\t\t\t\t\tthis.ElMessage(this.$t('elMessages.element_created'));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tthis.ElMessage.error(this.$t('elMessages.cant_create_element'));\n\t\t\t},\n\t\t\tasync removeElementDetail(data)\n\t\t\t{\n\t\t\t\tlet result = await this.removeElement(data);\n\t\t\t\tif (result)\n\t\t\t\t\tthis.ElMessage(this.$t('elMessages.element_removed'));\n\t\t\t\tthis.$router.go(-1);\n\t\t\t}\n\t\t},\n\t\tmounted()\n\t\t{\n\t\t\tif(this.$store.state.tables.tables.length > 0)\n\t\t\t\tthis.show = true;\n\t\t\tthis.$store.subscribe((mutation, state) => {\n\t\t\t\tif(mutation.type == 'setTables')\n\t\t\t\t\tthis.show = true;\n\t\t\t});\n\t\t}\n\t}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./detail.vue?vue&type=template&id=422b5f98&\"\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&lang=scss&\"","import qs from 'qs';\nexport default\n{\n\tmethods:\n\t{\n\t\tasync saveElement(data)\n\t\t{\n\t\t\tlet result = await this.$store.dispatch('saveSelectedElement', data);\n\t\t\treturn result;\n\t\t},\n\t\tasync createElement(data)\n\t\t{\n\t\t\tlet primaryKeyCode = this.$store.getters.getPrimaryKeyCode(data.tableCode);\n\t\t\tlet setValues  = {};\n\t\t\tfor(let fieldCode in data.selectedElement)\n\t\t\t{\n\t\t\t\tif(primaryKeyCode == fieldCode) continue;\n\t\t\t\tsetValues[fieldCode] = data.selectedElement[fieldCode];\n\t\t\t}\n\n\t\t\tlet insertData = qs.stringify({\n\t\t\t\tinsert:\n\t\t\t\t{\n\t\t\t\t\ttable   :data.tableCode,\n\t\t\t\t\tvalues  :[setValues]\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet result = await this.$axios.post('/el/insert/',insertData);\n\t\t\treturn result;\n\t\t},\n\t\tasync removeElement(data)\n\t\t{\n\t\t\tlet primaryKeyCode = this.$store.getters.getPrimaryKeyCode(data.tableCode);\n\t\t\tlet result = await this.$store.dispatch('removeRecord', {\n\t\t\t\tdelete:\n\t\t\t\t{\n\t\t\t\t\ttable: data.tableCode,\n\t\t\t\t\twhere:\n\t\t\t\t\t{\n\t\t\t\t\t\toperation:'and',\n\t\t\t\t\t\tfields:[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcode      : primaryKeyCode,\n\t\t\t\t\t\t\t\toperation : 'IS',\n\t\t\t\t\t\t\t\tvalue     : data.selectedElement[primaryKeyCode],\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t}\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detail\"},[_c('div',{staticClass:\"detail-head\"},[_c('div',{staticClass:\"detail-head__burger\",class:{'hidden':_vm.isShowSidebar}},[_c('MobileBurger')],1),_c('div',{staticClass:\"detail-head-name\"},[_c('div',{staticClass:\"detail-icon-wrapper\"},[_c('svg',{attrs:{\"width\":\"14\",\"height\":\"13\"}},[_c('use',{attrs:{\"xlink:href\":\"#tableicon\"}})])]),(_vm.name != 'tableAddElement')?[_c('div',{staticClass:\"detail-name-wrapper\"},[_c('div',{staticClass:\"detail-head-label\"},[_vm._v(_vm._s(_vm.$t('pages.table.edit_element')))]),_c('div',{staticClass:\"detail-head-descr\"},[_vm._v(_vm._s(_vm.tableCode))])]),_c('div',{staticClass:\"detail-head__buttons\"},[_c('button',{staticClass:\"el-gbtn\",on:{\"click\":_vm.cancel}},[_vm._v(_vm._s(_vm.$t('cancel')))]),_c('button',{staticClass:\"el-gbtn\",on:{\"click\":_vm.remove}},[_vm._v(_vm._s(_vm.$t('remove')))]),_c('button',{staticClass:\"el-btn\",on:{\"click\":_vm.saveElement}},[_vm._v(_vm._s(_vm.$t('save')))])])]:[_c('div',{staticClass:\"detail-name-wrapper\"},[_c('div',{staticClass:\"detail-head-label\"},[_vm._v(_vm._s(_vm.$t('pages.table.new_element')))]),_c('div',{staticClass:\"detail-head-descr\"},[_vm._v(_vm._s(_vm.tableCode))])]),_c('div',{staticClass:\"detail-head__buttons\"},[_c('button',{staticClass:\"el-gbtn\",on:{\"click\":_vm.cancel}},[_vm._v(_vm._s(_vm.$t('cancel')))]),_c('button',{staticClass:\"el-btn\",on:{\"click\":_vm.createElement}},[_vm._v(_vm._s(_vm.$t('create')))])])]],2)]),_c('div',{staticClass:\"detail-feilds\"},_vm._l((_vm.selectedElement),function(column,columnCode){return _c('div',{key:(\"selItem\" + columnCode),staticClass:\"detail-feild\"},[_c('div',{staticClass:\"detail-field__name-wrap\"},[_c('img',{staticClass:\"detail-field__icon-image\",attrs:{\"src\":require((\"@/assets\" + (_vm.columnEmSettings(columnCode).type_info.iconPath)))}}),_c('div',{staticClass:\"detail-field-name\"},[_c('span',[_vm._v(_vm._s(_vm.getColumnName(columnCode)))]),_c('small',[_vm._v(_vm._s(columnCode))])])]),_c('div',{staticClass:\"detail-field-box\"},[(_vm.columns[columnCode])?_c('MainField',{attrs:{\"mode\":\"edit\",\"view\":\"detail\",\"fieldName\":_vm.columns[columnCode].em.settings.code,\"params\":{\n\t\t\t\t\t\tvalue     : column,\n\t\t\t\t\t\tsettings  : _vm.$store.getters.getColumnSettings(_vm.tableCode, columnCode, _vm.selectedElement)\n\t\t\t\t\t}},on:{\"onChange\":_vm.changeFieldValue}}):_vm._e()],1)])}),0),_c('div',{staticClass:\"detail__buttons\"},[(_vm.name != 'tableAddElement')?[_c('button',{staticClass:\"el-gbtn\",on:{\"click\":_vm.cancel}},[_vm._v(_vm._s(_vm.$t('cancel')))]),_c('button',{staticClass:\"el-gbtn\",on:{\"click\":_vm.remove}},[_vm._v(_vm._s(_vm.$t('remove')))]),_c('button',{staticClass:\"el-btn\",on:{\"click\":_vm.saveElement}},[_vm._v(_vm._s(_vm.$t('save')))])]:[_c('button',{staticClass:\"el-gbtn\",on:{\"click\":_vm.cancel}},[_vm._v(_vm._s(_vm.$t('cancel')))]),_c('button',{staticClass:\"el-btn\",on:{\"click\":_vm.createElement}},[_vm._v(_vm._s(_vm.$t('create')))])]],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"detail\">\n\t\t<div class=\"detail-head\">\n\t\t\t<div class=\"detail-head__burger\" :class=\"{'hidden':isShowSidebar}\"><MobileBurger/></div>\n\t\t\t<div class=\"detail-head-name\">\n\t\t\t\t<div class=\"detail-icon-wrapper\">\n\t\t\t\t\t<svg width=\"14\" height=\"13\">\n\t\t\t\t\t\t<use xlink:href=\"#tableicon\"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<template v-if=\"name != 'tableAddElement'\">\n\t\t\t\t\t<div class=\"detail-name-wrapper\">\n\t\t\t\t\t\t<div class=\"detail-head-label\">{{$t('pages.table.edit_element')}}</div>\n\t\t\t\t\t\t<div class=\"detail-head-descr\">{{ tableCode }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"detail-head__buttons\">\n\t\t\t\t\t\t<button @click=\"cancel\" class=\"el-gbtn\">{{$t('cancel')}}</button>\n\t\t\t\t\t\t<button @click=\"remove\" class=\"el-gbtn\">{{$t('remove')}}</button>\n\t\t\t\t\t\t<button @click=\"saveElement\" class=\"el-btn\">{{$t('save')}}</button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class=\"detail-name-wrapper\">\n\t\t\t\t\t\t<div class=\"detail-head-label\">{{$t('pages.table.new_element')}}</div>\n\t\t\t\t\t\t<div class=\"detail-head-descr\">{{ tableCode }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"detail-head__buttons\">\n\t\t\t\t\t\t<button @click=\"cancel\" class=\"el-gbtn\">{{$t('cancel')}}</button>\n\t\t\t\t\t\t<button @click=\"createElement\" class=\"el-btn\">{{$t('create')}}</button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"detail-feilds\">\n\t\t\t<div\n\t\t\t\tclass=\"detail-feild\"\n\t\t\t\tv-for=\"(column,columnCode) in selectedElement\"\n\t\t\t\t:key=\"`selItem${columnCode}`\"\n\t\t\t>\n\t\t\t\t<div class=\"detail-field__name-wrap\">\n\t\t\t\t\t<img class=\"detail-field__icon-image\" :src=\"require(`@/assets${columnEmSettings(columnCode).type_info.iconPath}`)\">\n\t\t\t\t\t<div class=\"detail-field-name\">\n\t\t\t\t\t\t<span>{{ getColumnName(columnCode) }}</span>\n\t\t\t\t\t\t<small>{{ columnCode }}</small>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"detail-field-box\">\n\t\t\t\t\t<MainField\n\t\t\t\t\t\tv-if=\"columns[columnCode]\"\n\t\t\t\t\t\tmode=\"edit\"\n\t\t\t\t\t\tview=\"detail\"\n\t\t\t\t\t\t:fieldName=\"columns[columnCode].em.settings.code\"\n\t\t\t\t\t\t:params=\"{\n\t\t\t\t\t\t\tvalue     : column,\n\t\t\t\t\t\t\tsettings  : $store.getters.getColumnSettings(tableCode, columnCode, selectedElement)\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\t@onChange=\"changeFieldValue\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"detail__buttons\">\n\t\t\t<template v-if=\"name != 'tableAddElement'\">\n\t\t\t\t<button @click=\"cancel\" class=\"el-gbtn\">{{$t('cancel')}}</button>\n\t\t\t\t<button @click=\"remove\" class=\"el-gbtn\">{{$t('remove')}}</button>\n\t\t\t\t<button @click=\"saveElement\" class=\"el-btn\">{{$t('save')}}</button>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<button @click=\"cancel\" class=\"el-gbtn\">{{$t('cancel')}}</button>\n\t\t\t\t<button @click=\"createElement\" class=\"el-btn\">{{$t('create')}}</button>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n<script>\n\timport MainField from '@/components/fields/MainField.vue';\n\timport qs from 'qs';\n\timport MobileBurger from '@/components/blocks/MobileBurger.vue';\n\timport { mapGetters } from 'vuex';\n\n\texport default\n\t{\n\t\tprops: ['tableCode', 'name', 'id', 'element', 'updatedElAt'],\n\t\tcomponents: {MainField, MobileBurger},\n\t\tcomputed:\n\t\t{\n\t\t\t...mapGetters([\n\t\t\t\t'isShowSidebar',\n\t\t\t]),\n\t\t},\n\t\tdata()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcolumns:{},\n\t\t\t\tselectedElement:{},\n\t\t\t\tfieldNames:{}\n\t\t\t}\n\t\t},\n\t\twatch:\n\t\t{\n\t\t\tid(newId)\n\t\t\t{\n\t\t\t\tthis.selectedElement.id = newId;\n\t\t\t},\n\t\t\tupdatedElAt(val)\n\t\t\t{\n\t\t\t\tthis.selectElement();\n\t\t\t},\n\t\t},\n\t\tmounted()\n\t\t{\n\t\t\tthis.selectElement();\n\t\t\tthis.fieldNames = Object.assign(this.fieldNames, this.$store.getters.getTableFieldsNames(this.tableCode));\n\t\t},\n\t\tmethods:\n\t\t{\n\t\t\tasync selectElement()\n\t\t\t{\n\t\t\t\tlet requestParams = {\n\t\t\t\t\tselect : {},\n\t\t\t\t\twhere  : [],\n\t\t\t\t\torder  : [],\n\t\t\t\t};\n\t\t\t\trequestParams.select.from = this.tableCode;\n\t\t\t\tlet primaryKeyCode        = this.$store.getters.getPrimaryKeyCode(this.tableCode);\n\t\t\t\tthis.columns              = this.$store.getters.getColumns(this.tableCode);\n\t\t\t\tif(this.name != 'tableAddElement' && !this.element)\n\t\t\t\t{\n\t\t\t\t\trequestParams.select.where = {\n\t\t\t\t\t\toperation:'and',\n\t\t\t\t\t\tfields:[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcode      : primaryKeyCode,\n\t\t\t\t\t\t\t\toperation : 'IS',\n\t\t\t\t\t\t\t\tvalue     : this.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t};\n\t\t\t\t\tawait this.$store.dispatch('selectElement',requestParams);\n\t\t\t\t\tthis.$set(this, 'selectedElement', this.$store.state.tables.selectedElement);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfor(let columnCode in this.columns)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$set(this.selectedElement, columnCode,'');\n\t\t\t\t\t\tthis.$set(this.selectedElement, columnCode, '');\n\t\t\t\t\t\tif (this.element && typeof this.element[columnCode] != 'undefined')\n\t\t\t\t\t\t\tthis.$set(this.selectedElement, columnCode, this.element[columnCode]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t/**\n\t\t\t * Триггер изменения значения филда\n\t\t\t * Переносим значение в наш стейт\n\t\t\t * @fieldValue {\n\t\t\t *     value,\n\t\t\t *     settings(основной формат)\n\t\t\t * }\n\t\t\t */\n\t\t\tchangeFieldValue(fieldValue)\n\t\t\t{\n\t\t\t\tthis.selectedElement[fieldValue.settings.fieldCode] = fieldValue.value;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Return em object of column\n\t\t\t */\n\t\t\tcolumnEmSettings(columnCode)\n\t\t\t{\n\t\t\t\tif(typeof this.columns[columnCode] != 'undefined')\n\t\t\t\t\treturn this.columns[columnCode].em;\n\t\t\t\tthrow new Error(`No column with code ${columnCode}`);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns column name or code\n\t\t\t */\n\t\t\tgetColumnName(columnCode)\n\t\t\t{\n\t\t\t\treturn this.columnEmSettings(columnCode).name || columnCode;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Сохранение элемента\n\t\t\t */\n\t\t\tsaveElement()\n\t\t\t{\n\t\t\t\tthis.$emit('saveElement', {\n\t\t\t\t\tselectedElement : this.selectedElement,\n\t\t\t\t\ttableCode       : this.tableCode,\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Создание элемента переход на страницу редактирования\n\t\t\t */\n\t\t\tcreateElement()\n\t\t\t{\n\t\t\t\tthis.$emit('createElement', {\n\t\t\t\t\tselectedElement : this.selectedElement,\n\t\t\t\t\ttableCode       : this.tableCode,\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Отмена редактирования\n\t\t\t */\n\t\t\tcancel()\n\t\t\t{\n\t\t\t\tthis.$emit('cancel');\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Удаление элемента\n\t\t\t */\n\t\t\tremove()\n\t\t\t{\n\t\t\t\tthis.$emit('removeElement', {\n\t\t\t\t\tselectedElement : this.selectedElement,\n\t\t\t\t\ttableCode       : this.tableCode,\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t};\n</script>\n<style lang=\"scss\">\n\t.detail\n\t{\n\t\tpadding: 23px 0 0px 21px;\n\t\theight: 100%;\n\t}\n\t.detail-head\n\t{\n\t\tdisplay: flex;\n\t\tmargin-bottom: 28px;\n\t\tpadding-right: 95px;\n\t\talign-items: center;\n\t}\n\t.detail-head-name\n\t{\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\twidth:100%;\n\t}\n\t.detail-icon-wrapper\n\t{\n\t\tmargin-right: 3px;\n\t\tfont-weight: 500;\n\t\tline-height: normal;\n\t\tfont-size: 20px;\n\t\tcolor: #000000;\n\t}\n\t.detail-head-label\n\t{\n\t\tfont-family: $rBold;\n\t\tfont-size: 20px;\n\t\tcolor: #191C21;\n\t\tline-height: 22px;\n\t\ttext-transform: capitalize;\n\t}\n\t.detail-head-descr\n\t{\n\t\tcolor: rgba(103, 115, 135, 0.4);\n\t\tfont-size: 10px;\n\t\ttext-transform: lowercase;\n\t}\n\t.detail-name-wrapper{padding-left:7px; }\n\t.detail-feilds\n\t{\n\t\tborder-top: 1px solid rgba(103, 115, 135, 0.1);\n\t\toverflow: auto;\n\t\theight: calc(100vh - 85px);\n\t}\n\t.detail-feild\n\t{\n\t\tmin-height: 40px;\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tborder-bottom: 1px solid rgba(103, 115, 135, 0.1);\n\t}\n\t.detail-field__name-wrap {display: flex; margin-top: 6px;padding-left: 21px;}\n\t.detail-field__icon-image{margin-right: 15px;width: 13px;}\n\t.detail-field-name\n\t{\n\t\twidth:140px;\n\t\tflex-shrink:0;\n\t\tspan\n\t\t{\n\t\t\tdisplay:block;\n\t\t\tfont-size: 12px;\n\t\t\tline-height: normal;\n\t\t\tcolor: #191C21;\n\t\t\ttext-transform: capitalize;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\twhite-space: nowrap;\n\t\t}\n\t\tsmall\n\t\t{\n\t\t\tdisplay:block;\n\t\t\tfont-size: 10px;\n\t\t\tline-height: normal;\n\t\t\tcolor: rgba(103, 115, 135, 0.4);\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\twhite-space: nowrap;\n\t\t}\n\t}\n\t.detail-field-box\n\t{\n\t\tposition: relative;\n\t\tmin-width: 400px;\n\t\tmin-height: 40px;\n\t\tborder-left: 1px solid rgba(103, 115, 135, 0.1);\n\t\tpadding-left: 14px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\t.em-string,\n\t\t.em-list,\n\t\t.em-node,\n\t\t.em-user,\n\t\t.em-file-item-col,\n\t\t.em-date-wr\n\t\t{\n\t\t\tmax-height: 40px;\n\t\t\tposition: relative;\n\t\t}\n\t\t.ql-editor\n\t\t{\n\t\t\tpadding: 0;\n\t\t}\n\t}\n\t.detail-head__buttons\n\t{\n\t\tflex-grow: 1;\n\t\ttext-align: right;\n\t\tbutton{\n\t\t\tmargin-left:10px;\n\t\t}\n\t}\n\t.detail__buttons { display: none; }\n\t.detail-head__burger\n\t{\n\t\tmargin-right: 20px;\n\t\t&.hidden{display: none;}\n\t}\n\t@media (max-width: 768px)\n\t{\n\t\t.detail { padding: 10px 0 0px 10px; }\n\t\t.detail-head\n\t\t{\n\t\t\tpadding-right: 14px;\n\t\t\tmin-width: 320px;\n\t\t}\n\t\t.detail-head-name { flex-wrap: wrap; }\n\t\t.detail-head__buttons { display: none; }\n\t\t.detail-name-wrapper { flex-basis: 90%; margin-bottom: 0; }\n\t\t.detail-icon-wrapper { flex-basis: 4%; margin-bottom: 0; }\n\t\t.detail-field-box { min-width: 150px; }\n\t\t.detail__buttons\n\t\t{\n\t\t\tposition: sticky;\n\t\t\tbottom: 0;\n\t\t\tbackground-color: #fff;\n\t\t\tdisplay: block;\n\t\t\tpadding: 10px 0;\n\t\t\tmargin-top: auto;\n\t\t\tbutton { margin-left: 10px; &:first-child { margin-left: 0; } }\n\t\t}\n\t}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=7141bf3a&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Detail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}