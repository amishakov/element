{"remainingRequest":"/Users/valeri/projects/element/newelement/vue/node_modules/babel-loader/lib/index.js!/Users/valeri/projects/element/newelement/vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/valeri/projects/element/newelement/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/valeri/projects/element/newelement/vue/src/pages/table.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/valeri/projects/element/newelement/vue/src/pages/table.vue","mtime":1548169227454},{"path":"/Users/valeri/projects/element/newelement/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/valeri/projects/element/newelement/vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/valeri/projects/element/newelement/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/valeri/projects/element/newelement/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/valeri/projects/element/newelement/vue/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      columns: [],\n      tableData: []\n    };\n  },\n  methods: {\n    /**\n     * Достать названия полей таблицы\n     */\n    getColumnsHead: function () {\n      var _getColumnsHead = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(tableName) {\n        var data, resultCol;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                data = new FormData();\n\n                if (!(typeof tableName == 'undefined')) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", false);\n\n              case 3:\n                data.append('table_name', tableName);\n                _context.next = 6;\n                return this.$axios({\n                  method: 'post',\n                  url: '/table/getColumns',\n                  data: data\n                });\n\n              case 6:\n                resultCol = _context.sent;\n\n                if (resultCol.data.success) {\n                  _context.next = 9;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", false);\n\n              case 9:\n                this.columns = resultCol.data.columns;\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getColumnsHead(_x) {\n        return _getColumnsHead.apply(this, arguments);\n      }\n\n      return getColumnsHead;\n    }(),\n\n    /**\n     * Достать содержимое таблицы\n     */\n    getTableData: function () {\n      var _getTableData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(tableName) {\n        var data, resultData;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(typeof tableName == 'undefined')) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", false);\n\n              case 2:\n                data = new FormData();\n                data.append('table_name', tableName);\n                _context2.next = 6;\n                return this.$axios({\n                  method: 'post',\n                  url: '/table/getTableData',\n                  data: data\n                });\n\n              case 6:\n                resultData = _context2.sent;\n\n                if (resultData.data.success) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", false);\n\n              case 9:\n                this.tableData = resultData.data.result;\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getTableData(_x2) {\n        return _getTableData.apply(this, arguments);\n      }\n\n      return getTableData;\n    }()\n  },\n  mounted: function () {\n    var _mounted = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee3() {\n      var tableName;\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              tableName = this.$route.params.name;\n              this.getColumnsHead(tableName);\n              this.getTableData(tableName);\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }()\n};",{"version":3,"sources":["table.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAWA,eACA;AACA,EAAA,IADA,kBAEA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,SAAA,EAAA;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,OAAA,EACA;AACA;;;AAGA,IAAA,cAJA;AAAA;AAAA;AAAA,+CAIA,SAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,gBAAA,IANA,GAMA,IAAA,QAAA,EANA;;AAAA,sBAQA,OAAA,SAAA,IAAA,WARA;AAAA;AAAA;AAAA;;AAAA,iDASA,KATA;;AAAA;AAWA,gBAAA,IAAA,CAAA,MAAA,CAAA,YAAA,EAAA,SAAA;AAXA;AAAA,uBAaA,KAAA,MAAA,CAAA;AACA,kBAAA,MAAA,EAAA,MADA;AAEA,kBAAA,GAAA,EAAA,mBAFA;AAGA,kBAAA,IAAA,EAAA;AAHA,iBAAA,CAbA;;AAAA;AAaA,gBAAA,SAbA;;AAAA,oBAmBA,SAAA,CAAA,IAAA,CAAA,OAnBA;AAAA;AAAA;AAAA;;AAAA,iDAoBA,KApBA;;AAAA;AAsBA,qBAAA,OAAA,GAAA,SAAA,CAAA,IAAA,CAAA,OAAA;;AAtBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAwBA;;;AAGA,IAAA,YA3BA;AAAA;AAAA;AAAA,gDA2BA,SA3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBA6BA,OAAA,SAAA,IAAA,WA7BA;AAAA;AAAA;AAAA;;AAAA,kDA8BA,KA9BA;;AAAA;AAgCA,gBAAA,IAhCA,GAgCA,IAAA,QAAA,EAhCA;AAkCA,gBAAA,IAAA,CAAA,MAAA,CAAA,YAAA,EAAA,SAAA;AAlCA;AAAA,uBAoCA,KAAA,MAAA,CAAA;AACA,kBAAA,MAAA,EAAA,MADA;AAEA,kBAAA,GAAA,EAAA,qBAFA;AAGA,kBAAA,IAAA,EAAA;AAHA,iBAAA,CApCA;;AAAA;AAoCA,gBAAA,UApCA;;AAAA,oBA0CA,UAAA,CAAA,IAAA,CAAA,OA1CA;AAAA;AAAA;AAAA;;AAAA,kDA2CA,KA3CA;;AAAA;AA6CA,qBAAA,SAAA,GAAA,UAAA,CAAA,IAAA,CAAA,MAAA;;AA7CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,GATA;AAyDA,EAAA,OAzDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2DA,cAAA,SA3DA,GA2DA,KAAA,MAAA,CAAA,MAAA,CAAA,IA3DA;AA4DA,mBAAA,cAAA,CAAA,SAAA;AACA,mBAAA,YAAA,CAAA,SAAA;;AA7DA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CADA","sourcesContent":["<template>\n\t<div>\n\t\t<table>\n\t\t\t<th v-for=\"item in columns\">{{item.field}}</th>\n\t\t\t<tr v-for=\"item in tableData\">\n\t\t\t\t<td v-for=\"sub in item\">{{sub}}</td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n</template>\n<script>\n\texport default\n\t{\n\t\tdata()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcolumns: [],\n\t\t\t\ttableData: []\n\t\t\t}\n\t\t},\n\t\tmethods:\n\t\t{\n\t\t\t/**\n\t\t\t * Достать названия полей таблицы\n\t\t\t */\n\t\t\tasync getColumnsHead(tableName)\n\t\t\t{\n\t\t\t\tvar data = new FormData();\n\n\t\t\t\tif (typeof tableName == 'undefined')\n\t\t\t\t\treturn false;\n\n\t\t\t\tdata.append('table_name', tableName);\n\n\t\t\t\tvar resultCol = await this.$axios({\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\turl: '/table/getColumns',\n\t\t\t\t\tdata: data\n\t\t\t\t});\n\n\t\t\t\tif (!resultCol.data.success)\n\t\t\t\t\treturn false;\n\n\t\t\t\tthis.columns = resultCol.data.columns;\n\t\t\t},\n\t\t\t/**\n\t\t\t * Достать содержимое таблицы\n\t\t\t */\n\t\t\tasync getTableData(tableName)\n\t\t\t{\n\t\t\t\tif (typeof tableName == 'undefined')\n\t\t\t\t\treturn false;\n\n\t\t\t\tvar data = new FormData();\n\n\t\t\t\tdata.append('table_name', tableName);\n\n\t\t\t\tvar resultData = await this.$axios({\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\turl: '/table/getTableData',\n\t\t\t\t\tdata: data\n\t\t\t\t});\n\n\t\t\t\tif (!resultData.data.success)\n\t\t\t\t\treturn false;\n\n\t\t\t\tthis.tableData = resultData.data.result;\n\t\t\t}\n\t\t},\n\t\tasync mounted()\n\t\t{\n\t\t\tvar tableName = this.$route.params.name;\n\t\t\tthis.getColumnsHead(tableName);\n\t\t\tthis.getTableData(tableName);\n\t\t}\n\t}\n</script>"],"sourceRoot":"src/pages"}]}