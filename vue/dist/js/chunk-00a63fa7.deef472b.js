(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00a63fa7"],{1834:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{on:{click:e.select}},[e._t("default")],2)},s=[],r={template:"",name:"SelectOption",methods:{select:function(e){var t=e.target;this.$parent.setContent(t.innerHTML),this.$parent.toggleDropdown()}}},l=r,a=i("2877"),o=Object(a["a"])(l,n,s,!1,null,null,null);t["a"]=o.exports},"1ed7":function(e,t,i){"use strict";var n=i("6a34"),s=i.n(n);s.a},"2f21":function(e,t,i){"use strict";var n=i("79e5");e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},4735:function(e,t,i){},5040:function(e,t,i){"use strict";var n=i("4735"),s=i.n(n);s.a},"55dd":function(e,t,i){"use strict";var n=i("5ca1"),s=i("d8e8"),r=i("4bf8"),l=i("79e5"),a=[].sort,o=[1,2,3];n(n.P+n.F*(l(function(){o.sort(void 0)})||!l(function(){o.sort(null)})||!i("2f21")(a)),"Array",{sort:function(e){return void 0===e?a.call(r(this)):a.call(r(this),s(e))}})},"6a34":function(e,t,i){},"7b8d":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"select"},[i("button",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeDropdown,expression:"closeDropdown"}],staticClass:"select__trigger",class:{active:e.active},on:{click:e.toggleDropdown}},[i("div",{staticClass:"select__content",domProps:{innerHTML:e._s(e.content)}}),i("span",{staticClass:"select__arrow"},[i("svg",{attrs:{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M9.26399 0.171389L9.26396 0.171427L5.00466 4.43907L0.736982 0.171389C0.580928 0.0153346 0.327417 0.0153346 0.171362 0.171389C0.0153076 0.327444 0.0153076 0.580955 0.171362 0.737009L4.71346 5.27911C4.79126 5.3569 4.88943 5.39615 4.99628 5.39615C5.09399 5.39615 5.20081 5.35738 5.27909 5.27911L9.82063 0.737571C9.98584 0.581446 9.98569 0.327466 9.82962 0.171389C9.67356 0.0153346 9.42005 0.0153346 9.26399 0.171389Z",fill:"#677387",stroke:"#677387","stroke-width":"0.1"}})])])]),i("transition",{attrs:{name:"fade"}},[e.active?i("ul",{staticClass:"select__dropdown"},[e._t("default")],2):e._e()])],1)},s=[],r={props:["defaultText"],data:function(){return{active:!1,value:"",content:!1}},mounted:function(){this.content=this.defaultText},methods:{toggleDropdown:function(){this.active=!this.active},closeDropdown:function(){this.active=!1},setContent:function(e){this.content=e}}},l=r,a=(i("1ed7"),i("2877")),o=Object(a["a"])(l,n,s,!1,null,null,null);t["a"]=o.exports},"8a69":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"filters-popup__wrapper"},[i("div",{staticClass:"filters-popup__rows"},e._l(e.filter,function(t,n){return i("div",{staticClass:"filters-popup__row"},[i("div",{staticClass:"filters-popup__operators-wrapper"},[n>0?i("Select",{staticClass:"filters-popup__select",attrs:{defaultText:e.defaultOper}},e._l(e.binOperations,function(t){return i("SelectOption",{key:t,class:{active:e.defaultOper==t},nativeOn:{click:function(i){return e.selectLogic(t)}}},[e._v(e._s(t))])}),1):e._e(),i("Select",{staticClass:"filters-popup__select",attrs:{defaultText:t.name?t.name:t.code}},e._l(e.columns,function(n){return i("SelectOption",{key:n.field,class:{active:t.code==n.field},nativeOn:{click:function(i){return e.selectField(t,n)}}},[e._v(e._s(n.em.name?n.em.name:n.field))])}),1),i("Select",{staticClass:"filters-popup__select",attrs:{defaultText:t.operation}},e._l(e.operations,function(n){return i("SelectOption",{key:n,class:{active:t.operation==n},nativeOn:{click:function(i){return e.selectOperation(t,n)}}},[e._v(e._s(n))])}),1),i("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filterItem.value"}],staticClass:"filters-popup__filter-input el-inp",attrs:{type:"text",placeholder:"Value"},domProps:{value:t.value},on:{input:function(i){i.target.composing||e.$set(t,"value",i.target.value)}}})],1),i("div",{staticClass:"filters-popup__delete-row-icon-wrapper",on:{click:function(t){return t.stopPropagation(),e.deleteRowFilter(n)}}},[i("div",{staticClass:"filters-popup__delete-row-icon"},[i("svg",{attrs:{width:"12",height:"12"}},[i("use",{attrs:{"xlink:href":"#plus-white"}})])])])])}),0),i("button",{staticClass:"el-gbtn",on:{click:e.addFilterRow}},[e._v("Add filter")])])},s=[],r=i("5d73"),l=i.n(r),a=(i("55dd"),i("96cf"),i("3b8d")),o=(i("7f7f"),i("f499")),c=i.n(o),u=i("7b8d"),f=i("1834"),p=i("d230"),d={components:{Select:u["a"],SelectOption:f["a"]},mixins:[p["a"]],props:["columns","tview"],data:function(){return{select:{columnSelect:!1,operationSelect:!1,binSelect:!1},operations:["IS","IS NOT","CONTAINS","DOES NOT CONTAIN","START WITH","ENDS WITH","IS EMPTY","IS NOT EMPTY"],binOperations:["AND","OR"],defaultOper:"AND",filter:[],newFilters:[],sourceFilters:[],sendRequest:!0}},watch:{filter:{handler:function(){this.newFilters=[],this.buildNewFilter(this.newFilters,JSON.parse(c()(this.filter))),this.tview.filter=0==this.newFilters[0].fields.length?[]:this.newFilters[0];var e=this;if(!this.sendRequest)return!1;this.saveFilters(),this.sendRequest=!1,setTimeout(function(){e.sendRequest=!0,e.saveFilters()},2e3)},deep:!0}},methods:{selectField:function(e,t){e.code=t.field,e.name=t.em.name},selectOperation:function(e,t){e.operation=t},selectLogic:function(e){this.defaultOper=e},saveFilters:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,n=i("4328"),s=n.stringify({filters:0==this.newFilters[0].fields.length?[]:this.newFilters[0],tviewId:this.tview.id}),e.next=5,this.$store.dispatch("select",{select:{from:t.tview.table,page:1,tview:t.tview.id,where:0==this.newFilters[0].fields.length?"":t.newFilters[0],order:t.tview.sort}});case 5:return e.next=7,this.$axios({method:"GET",url:"/api/tview/saveFilters/",params:s,paramsSerializer:function(e){return s}});case 7:if(r=e.sent,r.data.success){e.next=10;break}return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),buildNewFilter:function(e,t){if("undefined"==typeof t)return!1;e.push({operation:this.defaultOper,fields:[]});var i=!0,n=!1,s=void 0;try{for(var r,a=l()(t);!(i=(r=a.next()).done);i=!0){var o=r.value;e[0].fields.push({code:o.code,operation:o.operation,value:o.value})}}catch(c){n=!0,s=c}finally{try{i||null==a.return||a.return()}finally{if(n)throw s}}},getFirstElement:function(e){for(var t in e)return e[t]},addFilterRow:function(){this.filter.push({code:this.getFirstElement(this.columns).field,operation:this.operations[0],value:"",select:JSON.parse(c()(this.select))})},deleteRowFilter:function(e){this.filter.splice(e,1)},getColumnNameByCode:function(e,t){for(var i in e)if(e[i].field==t)return e[i].em.name;return t},parseFilers:function(e,t){if("undefined"!=typeof e.fields)return this.defaultOper=e.operation,this.parseFilers(e.fields,e.operation),!1;for(var i in e)"undefined"==typeof e[i].fields?(this.$set(e[i],"select",JSON.parse(c()(this.select))),this.$set(e[i],"name",this.getColumnNameByCode(this.columns,e[i].code)),this.filter.push(JSON.parse(c()(e[i])))):this.parseFilers(e[i].fields,e[i].operation)}},mounted:function(){this.parseFilers(this.tview.filter),this.sourceFilters=this.tview.filter}},h=d,v=(i("5040"),i("2877")),w=Object(v["a"])(h,n,s,!1,null,null,null);t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-00a63fa7.deef472b.js.map